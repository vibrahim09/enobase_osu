{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/Maria/Downloads/enobase_osu/formula-engine/src/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\"\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Card = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    className={cn(\r\n      \"rounded-lg border bg-card text-card-foreground shadow-sm\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nCard.displayName = \"Card\"\r\n\r\nconst CardHeader = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\r\n    {...props}\r\n  />\r\n))\r\nCardHeader.displayName = \"CardHeader\"\r\n\r\nconst CardTitle = React.forwardRef<\r\n  HTMLParagraphElement,\r\n  React.HTMLAttributes<HTMLHeadingElement>\r\n>(({ className, ...props }, ref) => (\r\n  <h3\r\n    ref={ref}\r\n    className={cn(\r\n      \"text-2xl font-semibold leading-none tracking-tight\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nCardTitle.displayName = \"CardTitle\"\r\n\r\nconst CardContent = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\r\n))\r\nCardContent.displayName = \"CardContent\"\r\n\r\nexport { Card, CardHeader, CardTitle, CardContent }\r\n"],"names":[],"mappings":";;;;;;;AAAA;AACA;;;;AAEA,MAAM,qBAAO,8JAAM,UAAU,MAG3B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,4DACA;QAED,GAAG,KAAK;;;;;;;AAGb,KAAK,WAAW,GAAG;AAEnB,MAAM,2BAAa,8JAAM,UAAU,OAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;;AAGb,WAAW,WAAW,GAAG;AAEzB,MAAM,0BAAY,8JAAM,UAAU,OAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,sDACA;QAED,GAAG,KAAK;;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,4BAAc,8JAAM,UAAU,OAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QAAI,KAAK;QAAK,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,YAAY;QAAa,GAAG,KAAK;;;;;;;AAEhE,YAAY,WAAW,GAAG"}},
    {"offset": {"line": 76, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 82, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/Maria/Downloads/enobase_osu/formula-engine/src/components/ui/input.tsx"],"sourcesContent":["import * as React from \"react\"\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nexport interface InputProps\r\n  extends React.InputHTMLAttributes<HTMLInputElement> {}\r\n\r\nconst Input = React.forwardRef<HTMLInputElement, InputProps>(\r\n  ({ className, type, ...props }, ref) => {\r\n    return (\r\n      <input\r\n        type={type}\r\n        className={cn(\r\n          \"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\r\n          className\r\n        )}\r\n        ref={ref}\r\n        {...props}\r\n      />\r\n    )\r\n  }\r\n)\r\nInput.displayName = \"Input\"\r\n\r\nexport { Input }\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;;AAKA,MAAM,sBAAQ,8JAAM,UAAU,MAC5B,CAAC,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,OAAO,EAAE;IAC9B,qBACE,6LAAC;QACC,MAAM;QACN,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,gWACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;;AAEF,MAAM,WAAW,GAAG"}},
    {"offset": {"line": 112, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 118, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/Maria/Downloads/enobase_osu/formula-engine/src/components/ui/select.tsx"],"sourcesContent":["import * as React from \"react\"\r\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Select = SelectPrimitive.Root\r\n\r\nconst SelectTrigger = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\r\n>(({ className, children, ...props }, ref) => (\r\n  <SelectPrimitive.Trigger\r\n    ref={ref}\r\n    className={cn(\r\n      \"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    {children}\r\n  </SelectPrimitive.Trigger>\r\n))\r\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\r\n\r\nconst SelectContent = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\r\n>(({ className, children, position = \"popper\", ...props }, ref) => (\r\n  <SelectPrimitive.Portal>\r\n    <SelectPrimitive.Content\r\n      ref={ref}\r\n      className={cn(\r\n        \"relative z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\r\n        position === \"popper\" &&\r\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\r\n        className\r\n      )}\r\n      position={position}\r\n      {...props}\r\n    >\r\n      <SelectPrimitive.Viewport className=\"p-1\">\r\n        {children}\r\n      </SelectPrimitive.Viewport>\r\n    </SelectPrimitive.Content>\r\n  </SelectPrimitive.Portal>\r\n))\r\nSelectContent.displayName = SelectPrimitive.Content.displayName\r\n\r\nconst SelectItem = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.Item>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\r\n>(({ className, children, ...props }, ref) => (\r\n  <SelectPrimitive.Item\r\n    ref={ref}\r\n    className={cn(\r\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\r\n      <SelectPrimitive.ItemIndicator>\r\n        {/* You can add an icon here if desired */}\r\n      </SelectPrimitive.ItemIndicator>\r\n    </span>\r\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\r\n  </SelectPrimitive.Item>\r\n))\r\nSelectItem.displayName = SelectPrimitive.Item.displayName\r\n\r\nconst SelectValue = SelectPrimitive.Value\r\n\r\nexport {\r\n  Select,\r\n  SelectTrigger,\r\n  SelectContent,\r\n  SelectItem,\r\n  SelectValue,\r\n}\r\n"],"names":[],"mappings":";;;;;;;;AAAA;AAEA;AADA;;;;;AAGA,MAAM,SAAS,sKAAgB,IAAI;AAEnC,MAAM,8BAAgB,8JAAM,UAAU,MAGpC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACpC,6LAAC,sKAAgB,OAAO;QACtB,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,6RACA;QAED,GAAG,KAAK;kBAER;;;;;;;AAGL,cAAc,WAAW,GAAG,sKAAgB,OAAO,CAAC,WAAW;AAE/D,MAAM,8BAAgB,8JAAM,UAAU,OAGpC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,WAAW,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACzD,6LAAC,sKAAgB,MAAM;kBACrB,cAAA,6LAAC,sKAAgB,OAAO;YACtB,KAAK;YACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,8bACA,aAAa,YACX,mIACF;YAEF,UAAU;YACT,GAAG,KAAK;sBAET,cAAA,6LAAC,sKAAgB,QAAQ;gBAAC,WAAU;0BACjC;;;;;;;;;;;;;;;;;AAKT,cAAc,WAAW,GAAG,sKAAgB,OAAO,CAAC,WAAW;AAE/D,MAAM,2BAAa,8JAAM,UAAU,OAGjC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACpC,6LAAC,sKAAgB,IAAI;QACnB,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,6NACA;QAED,GAAG,KAAK;;0BAET,6LAAC;gBAAK,WAAU;0BACd,cAAA,6LAAC,sKAAgB,aAAa;;;;;;;;;;0BAIhC,6LAAC,sKAAgB,QAAQ;0BAAE;;;;;;;;;;;;;AAG/B,WAAW,WAAW,GAAG,sKAAgB,IAAI,CAAC,WAAW;AAEzD,MAAM,cAAc,sKAAgB,KAAK"}},
    {"offset": {"line": 216, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 222, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/Maria/Downloads/enobase_osu/formula-engine/src/hooks/useDrag.ts"],"sourcesContent":["import { useState, useEffect, useCallback } from 'react'\r\nimport { Position } from '@/types'\r\n\r\ninterface UseDragProps {\r\n  initialPosition: Position\r\n  onDragEnd?: (position: Position) => void\r\n  disabled?: boolean\r\n}\r\n\r\nexport function useDrag({ initialPosition, onDragEnd, disabled = false }: UseDragProps) {\r\n  const [position, setPosition] = useState<Position>(initialPosition)\r\n  const [isDragging, setIsDragging] = useState(false)\r\n  const [offset, setOffset] = useState<Position>({ x: 0, y: 0 })\r\n\r\n  const startDrag = useCallback((e: React.MouseEvent) => {\r\n    if (disabled) return\r\n    e.stopPropagation()\r\n    setIsDragging(true)\r\n    setOffset({\r\n      x: e.clientX - position.x,\r\n      y: e.clientY - position.y,\r\n    })\r\n  }, [position, disabled])\r\n\r\n  useEffect(() => {\r\n    const handleMouseMove = (e: MouseEvent) => {\r\n      if (isDragging) {\r\n        const newPosition = {\r\n          x: e.clientX - offset.x,\r\n          y: e.clientY - offset.y,\r\n        }\r\n        setPosition(newPosition)\r\n      }\r\n    }\r\n\r\n    const handleMouseUp = () => {\r\n      if (isDragging) {\r\n        setIsDragging(false)\r\n        onDragEnd?.(position)\r\n      }\r\n    }\r\n\r\n    if (isDragging) {\r\n      window.addEventListener('mousemove', handleMouseMove)\r\n      window.addEventListener('mouseup', handleMouseUp)\r\n    }\r\n\r\n    return () => {\r\n      window.removeEventListener('mousemove', handleMouseMove)\r\n      window.removeEventListener('mouseup', handleMouseUp)\r\n    }\r\n  }, [isDragging, offset, onDragEnd, position])\r\n\r\n  return { position, isDragging, startDrag }\r\n} "],"names":[],"mappings":";;;AAAA;;;AASO,SAAS,QAAQ,EAAE,eAAe,EAAE,SAAS,EAAE,WAAW,KAAK,EAAgB;;IACpF,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAY;IACnD,MAAM,CAAC,YAAY,cAAc,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAC7C,MAAM,CAAC,QAAQ,UAAU,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAY;QAAE,GAAG;QAAG,GAAG;IAAE;IAE5D,MAAM,YAAY,CAAA,GAAA,6JAAA,CAAA,cAAW,AAAD;0CAAE,CAAC;YAC7B,IAAI,UAAU;YACd,EAAE,eAAe;YACjB,cAAc;YACd,UAAU;gBACR,GAAG,EAAE,OAAO,GAAG,SAAS,CAAC;gBACzB,GAAG,EAAE,OAAO,GAAG,SAAS,CAAC;YAC3B;QACF;yCAAG;QAAC;QAAU;KAAS;IAEvB,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;6BAAE;YACR,MAAM;qDAAkB,CAAC;oBACvB,IAAI,YAAY;wBACd,MAAM,cAAc;4BAClB,GAAG,EAAE,OAAO,GAAG,OAAO,CAAC;4BACvB,GAAG,EAAE,OAAO,GAAG,OAAO,CAAC;wBACzB;wBACA,YAAY;oBACd;gBACF;;YAEA,MAAM;mDAAgB;oBACpB,IAAI,YAAY;wBACd,cAAc;wBACd,YAAY;oBACd;gBACF;;YAEA,IAAI,YAAY;gBACd,OAAO,gBAAgB,CAAC,aAAa;gBACrC,OAAO,gBAAgB,CAAC,WAAW;YACrC;YAEA;qCAAO;oBACL,OAAO,mBAAmB,CAAC,aAAa;oBACxC,OAAO,mBAAmB,CAAC,WAAW;gBACxC;;QACF;4BAAG;QAAC;QAAY;QAAQ;QAAW;KAAS;IAE5C,OAAO;QAAE;QAAU;QAAY;IAAU;AAC3C;GA7CgB"}},
    {"offset": {"line": 298, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 304, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/Maria/Downloads/enobase_osu/formula-engine/src/components/FormulaEngine.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useRef, useState, useEffect } from 'react'\r\nimport { Card, CardContent } from '@/components/ui/card'\r\nimport { Input } from '@/components/ui/input'\r\nimport { Button } from '@/components/ui/button'\r\nimport { DivideIcon, MinusIcon, PlusIcon, X as XIcon } from 'lucide-react'\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select'\r\nimport { useDrag } from '@/hooks/useDrag'\r\nimport { CanvasItem, Position } from '@/types'\r\nimport { cn } from '@/lib/utils'\r\nimport { FunctionSquare } from 'lucide-react'\r\n\r\ninterface FormulaEngineProps {\r\n  item: CanvasItem\r\n  variables: CanvasItem[]\r\n  onPositionChange: (position: Position) => void\r\n  onUpdate: (updates: Partial<CanvasItem>) => void\r\n  onDelete: () => void\r\n  onEditingEnd: () => void\r\n}\r\n\r\nconst FormulaEngine = ({ item, variables, onPositionChange, onUpdate, onDelete, onEditingEnd }: FormulaEngineProps) => {\r\n  const [isEditing, setIsEditing] = useState(false)\r\n  const [operand1, setOperand1] = useState<string>('')\r\n  const [operand2, setOperand2] = useState<string>('')\r\n  const [operator, setOperator] = useState<string>('')\r\n  const [result, setResult] = useState<number | null>(null)\r\n  const [isCalculating, setIsCalculating] = useState(false)\r\n  const cardRef = useRef<HTMLDivElement>(null)\r\n  const calculationTimeoutRef = useRef<NodeJS.Timeout>()\r\n\r\n  const { position, startDrag } = useDrag({\r\n    initialPosition: item.position,\r\n    onDragEnd: onPositionChange,\r\n    disabled: isEditing,\r\n  })\r\n\r\n  // Reset operands if variables are deleted\r\n  useEffect(() => {\r\n    const validVariables = variables.map(v => v.id)\r\n    if (operand1 && !validVariables.includes(operand1)) {\r\n      setOperand1('')\r\n    }\r\n    if (operand2 && !validVariables.includes(operand2)) {\r\n      setOperand2('')\r\n    }\r\n  }, [variables, operand1, operand2])\r\n\r\n  // Calculate result using backend API with debouncing\r\n  useEffect(() => {\r\n    const performCalculation = async () => {\r\n      if (!operand1 || !operand2 || !operator) {\r\n        setResult(null)\r\n        return\r\n      }\r\n\r\n      const var1 = variables.find(v => v.id === operand1)?.value ?? 0\r\n      const var2 = variables.find(v => v.id === operand2)?.value ?? 0\r\n\r\n      if (calculationTimeoutRef.current) {\r\n        clearTimeout(calculationTimeoutRef.current)\r\n      }\r\n\r\n      const loadingTimeout = setTimeout(() => {\r\n        setIsCalculating(true)\r\n      }, 500)\r\n\r\n      try {\r\n        // Only allow add and subtract operations for now\r\n        if (operator !== 'add' && operator !== 'subtract') {\r\n          setResult(null)\r\n          return\r\n        }\r\n\r\n        const requestBody = {\r\n          function: operator,\r\n          num1: var1,\r\n          num2: var2\r\n        }\r\n\r\n        const response = await fetch('/api', {\r\n          method: 'POST',\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n          },\r\n          body: JSON.stringify(requestBody),\r\n        })\r\n\r\n        if (!response.ok) {\r\n          throw new Error('Calculation failed')\r\n        }\r\n\r\n        const data = await response.json()\r\n        setResult(data.result)\r\n      } catch (error) {\r\n        console.error('Calculation error:', error)\r\n        setResult(null)\r\n      } finally {\r\n        clearTimeout(loadingTimeout)\r\n        setIsCalculating(false)\r\n      }\r\n    }\r\n\r\n    calculationTimeoutRef.current = setTimeout(performCalculation, 100)\r\n\r\n    return () => {\r\n      if (calculationTimeoutRef.current) {\r\n        clearTimeout(calculationTimeoutRef.current)\r\n      }\r\n    }\r\n  }, [operand1, operand2, operator, variables])\r\n\r\n  // Update linked variable when result changes\r\n  useEffect(() => {\r\n    if (result === null) return\r\n\r\n    const linkedVarId = `linked-${item.id}`\r\n    const existingVar = variables.find(v => v.id === linkedVarId)\r\n    \r\n    const linkedVariable: CanvasItem = {\r\n      id: linkedVarId,\r\n      type: 'variable',\r\n      position: { x: position.x, y: position.y + 200 },\r\n      name: `${item.name} (Result)`,\r\n      value: result\r\n    }\r\n\r\n    if (!existingVar || existingVar.value !== result) {\r\n      onUpdate({ linkedVariable })\r\n    }\r\n  }, [result, item.id, item.name, position.x, position.y, variables, onUpdate])\r\n\r\n  // Filter out this formula's linked variable from the available variables\r\n  const availableVariables = variables.filter(variable => variable.id !== `linked-${item.id}`)\r\n\r\n  const handleDoubleClick = (e: React.MouseEvent) => {\r\n    e.stopPropagation()\r\n    setIsEditing(true)\r\n  }\r\n\r\n  const handleNameChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const newName = e.target.value\r\n    \r\n    // Update formula name\r\n    onUpdate({ name: newName })\r\n\r\n    // Update linked variable name if it exists\r\n    const linkedVarId = `linked-${item.id}`\r\n    const existingVar = variables.find(v => v.id === linkedVarId)\r\n    \r\n    if (existingVar) {\r\n      onUpdate({ \r\n        linkedVariable: {\r\n          ...existingVar,\r\n          name: `${newName} (Result)`\r\n        }\r\n      })\r\n    }\r\n  }\r\n\r\n  const handleMouseDown = (e: React.MouseEvent) => {\r\n    if (!isEditing) {\r\n      startDrag(e)\r\n    }\r\n  }\r\n\r\n  const handleBlur = () => {\r\n    setIsEditing(false)\r\n    onEditingEnd()\r\n  }\r\n\r\n  return (\r\n    <Card\r\n      ref={cardRef}\r\n      className={cn(\r\n        \"absolute w-80\",\r\n        !isEditing && \"cursor-move\",\r\n        \"select-none\",\r\n      )}\r\n      style={{ left: position.x, top: position.y }}\r\n      onMouseDown={handleMouseDown}\r\n      onDoubleClick={handleDoubleClick}\r\n    >\r\n      {!isEditing && (\r\n        <XIcon \r\n          className=\"absolute right-2 top-2 h-6 w-6 rounded-full hover:cursor-pointer hover:bg-slate-100 dark:hover:bg-slate-800 p-1\"\r\n          onClick={(e) => {\r\n            e.stopPropagation()\r\n            onDelete()\r\n          }}\r\n        />\r\n      )}\r\n      <CardContent className=\"p-4 space-y-4\">\r\n        {isEditing ? (\r\n          <Input\r\n            value={item.name}\r\n            onChange={handleNameChange}\r\n            onBlur={handleBlur}\r\n            onClick={(e) => e.stopPropagation()}\r\n            placeholder=\"Formula name\"\r\n            className=\"cursor-text select-text\"\r\n            autoFocus/>\r\n        ) : (\r\n          <h3 className=\"font-medium flex items-center\"><FunctionSquare className='mr-1 size-5'/>{item.name}</h3>\r\n        )}\r\n\r\n        <div className=\"grid grid-cols-3 gap-2\">\r\n          <Select value={operand1} onValueChange={setOperand1}>\r\n            <SelectTrigger>\r\n              <SelectValue placeholder=\"Variable\"/>\r\n            </SelectTrigger>\r\n            <SelectContent>\r\n              {availableVariables.map(variable => (\r\n                <SelectItem key={variable.id} value={variable.id}>\r\n                  {variable.name}\r\n                </SelectItem>\r\n              ))}\r\n            </SelectContent>\r\n          </Select>\r\n\r\n          <Select value={operator} onValueChange={setOperator}>\r\n            <SelectTrigger>\r\n              <SelectValue placeholder=\"Operator\" />\r\n            </SelectTrigger>\r\n            <SelectContent>\r\n              <SelectItem value=\"add\"><PlusIcon className='size-4'/></SelectItem>\r\n              <SelectItem value=\"subtract\"><MinusIcon className='size-4'/></SelectItem>\r\n              {/* temporarily disabled until API implementation\r\n              <SelectItem value=\"multiply\"><XIcon className='size-4'/></SelectItem>\r\n              <SelectItem value=\"divide\"><DivideIcon className='size-4'/></SelectItem>\r\n              */}\r\n            </SelectContent>\r\n          </Select>\r\n\r\n          <Select value={operand2} onValueChange={setOperand2}>\r\n            <SelectTrigger>\r\n              <SelectValue placeholder=\"Variable\" />\r\n            </SelectTrigger>\r\n            <SelectContent>\r\n              {availableVariables.map(variable => (\r\n                <SelectItem key={variable.id} value={variable.id}>\r\n                  {variable.name}\r\n                </SelectItem>\r\n              ))}\r\n            </SelectContent>\r\n          </Select>\r\n        </div>\r\n\r\n        <div className=\"text-sm text-muted-foreground\">\r\n          Result: {isCalculating \r\n            ? 'Calculating...' \r\n            : result !== null \r\n              ? result.toFixed(2) \r\n              : 'Select values to calculate'}\r\n        </div>\r\n      </CardContent>\r\n    </Card>\r\n  )\r\n}\r\n\r\nexport { FormulaEngine }\r\nexport default FormulaEngine\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 731, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}